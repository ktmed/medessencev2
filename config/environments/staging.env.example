# =============================================================================
# MedEssenceAI Staging Environment Configuration
# IMPORTANT: This is an example file. Never commit actual secrets!
# Copy to staging.env and fill with actual values
# =============================================================================

# =============================================================================
# Environment Configuration
# =============================================================================
NODE_ENV=production
ENVIRONMENT=staging
LOG_LEVEL=debug

# =============================================================================
# Domain Configuration
# =============================================================================
FRONTEND_DOMAIN=staging.medessence-ai.com
API_DOMAIN=api-staging.medessence-ai.com
WEBSOCKET_DOMAIN=ws-staging.medessence-ai.com

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL Configuration
POSTGRES_HOST=postgres-service
POSTGRES_PORT=5432
POSTGRES_DB=medessence_staging
POSTGRES_USER=CHANGE_ME
POSTGRES_PASSWORD=CHANGE_ME_STAGING_PASSWORD
POSTGRES_MAX_CONNECTIONS=50
POSTGRES_SSL_MODE=require

# Database URL (constructed from above)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?sslmode=${POSTGRES_SSL_MODE}

# =============================================================================
# Cache Configuration (Redis)
# =============================================================================
REDIS_HOST=redis-service
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_STAGING_PASSWORD
REDIS_DB=1
REDIS_MAX_CONNECTIONS=10
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# =============================================================================
# Security Configuration
# =============================================================================
# JWT Configuration
JWT_SECRET=CHANGE_ME_JWT_STAGING_SECRET_MINIMUM_32_CHARS
JWT_REFRESH_SECRET=CHANGE_ME_JWT_REFRESH_STAGING_SECRET
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=30d

# Session Configuration
SESSION_SECRET=CHANGE_ME_SESSION_STAGING_SECRET
SESSION_TIMEOUT=7200

# Encryption Keys (HIPAA Compliance)
ENCRYPTION_KEY=CHANGE_ME_STAGING_ENCRYPTION_KEY_32_CHARS
PHI_ENCRYPTION_KEY=CHANGE_ME_STAGING_PHI_KEY_32_CHARS
PHI_ENCRYPTION_IV=CHANGE_ME_STAGING_IV_16_CHARS
MEDICAL_RECORD_KEY=CHANGE_ME_STAGING_MEDICAL_KEY_32_CHARS
AUDIT_LOG_ENCRYPTION_KEY=CHANGE_ME_STAGING_AUDIT_KEY_32_CHARS

# Bcrypt Configuration
BCRYPT_SALT_ROUNDS=10

# =============================================================================
# AI Provider Configuration
# =============================================================================
# OpenAI Configuration (use test keys or lower limits)
OPENAI_API_KEY=CHANGE_ME_OPENAI_STAGING_KEY
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.2

# Anthropic Configuration
ANTHROPIC_API_KEY=CHANGE_ME_ANTHROPIC_STAGING_KEY
ANTHROPIC_MODEL=claude-3-haiku-20240307
ANTHROPIC_MAX_TOKENS=2000

# Google AI Configuration
GOOGLE_API_KEY=CHANGE_ME_GOOGLE_STAGING_KEY
GOOGLE_MODEL=gemini-pro

# AI Provider Priority
AI_PROVIDER_PRIORITY=openai,google,anthropic

# =============================================================================
# CORS and Security Headers
# =============================================================================
CORS_ORIGINS=https://staging.medessence-ai.com,https://localhost:3000,https://localhost:3005
TRUSTED_PROXIES=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# =============================================================================
# Rate Limiting Configuration (More lenient for testing)
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=200
RATE_LIMIT_WINDOW=900
RATE_LIMIT_CONNECTIONS=10
RATE_LIMIT_RPS=20

# =============================================================================
# Medical Compliance (HIPAA) - Enabled but with test data
# =============================================================================
HIPAA_AUDIT_ENABLED=true
PHI_ENCRYPTION_ENABLED=true
DATA_RETENTION_DAYS=90
AUDIT_LOG_RETENTION_DAYS=365
MEDICAL_DATA_BACKUP_ENABLED=true

# =============================================================================
# Transcription Configuration
# =============================================================================
VOSK_SERVICE_URL=http://vosk-service:8002
WHISPER_MODEL_SIZE=small
TRANSCRIPTION_LANGUAGE=de-DE
MAX_CONCURRENT_TRANSCRIPTIONS=3
TRANSCRIPTION_TIMEOUT=180

# =============================================================================
# File Upload Configuration
# =============================================================================
MAX_FILE_SIZE_MB=25
ALLOWED_FILE_TYPES=mp3,wav,m4a,ogg,webm
UPLOAD_TIMEOUT=180
FILE_ENCRYPTION_ENABLED=true

# =============================================================================
# Monitoring and Observability
# =============================================================================
METRICS_ENABLED=true
PROMETHEUS_METRICS_PATH=/metrics
HEALTH_CHECK_PATH=/health
TRACING_ENABLED=true

# Sentry Configuration
SENTRY_DSN=CHANGE_ME_SENTRY_STAGING_DSN
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=0.5

# =============================================================================
# Email Configuration
# =============================================================================
SMTP_HOST=CHANGE_ME_SMTP_HOST
SMTP_PORT=587
SMTP_USER=CHANGE_ME_SMTP_USER
SMTP_PASSWORD=CHANGE_ME_SMTP_PASSWORD
EMAIL_FROM=staging@medessence-ai.com

# =============================================================================
# Backup Configuration
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 4 * * *
BACKUP_RETENTION_DAYS=7
AWS_BACKUP_REGION=us-east-1
S3_BACKUP_BUCKET=CHANGE_ME_STAGING_BACKUP_BUCKET

# AWS Credentials for Backups
AWS_ACCESS_KEY_ID=CHANGE_ME_AWS_STAGING_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=CHANGE_ME_AWS_STAGING_SECRET_KEY
AWS_REGION=us-east-1

# =============================================================================
# Kubernetes Configuration
# =============================================================================
# Resource Limits (Lower for staging)
CPU_QUOTA=10
MEMORY_QUOTA=20Gi
STORAGE_QUOTA=50Gi
STORAGE_CLASS=gp3-encrypted

# Replica Configuration (Fewer replicas)
BACKEND_REPLICAS=2
FRONTEND_REPLICAS=2
TRANSCRIPTION_REPLICAS=1
REPORT_GENERATION_REPLICAS=1
SUMMARY_GENERATION_REPLICAS=1
WEBSOCKET_PROXY_REPLICAS=1

# Auto-scaling Configuration
BACKEND_MIN_REPLICAS=1
BACKEND_MAX_REPLICAS=5
FRONTEND_MIN_REPLICAS=1
FRONTEND_MAX_REPLICAS=5

# Resource Requests and Limits (Lower for staging)
BACKEND_MEMORY_REQUEST=256Mi
BACKEND_MEMORY_LIMIT=1Gi
BACKEND_CPU_REQUEST=100m
BACKEND_CPU_LIMIT=500m

FRONTEND_MEMORY_REQUEST=128Mi
FRONTEND_MEMORY_LIMIT=512Mi
FRONTEND_CPU_REQUEST=50m
FRONTEND_CPU_LIMIT=250m

TRANSCRIPTION_MEMORY_REQUEST=512Mi
TRANSCRIPTION_MEMORY_LIMIT=2Gi
TRANSCRIPTION_CPU_REQUEST=250m
TRANSCRIPTION_CPU_LIMIT=1000m

# =============================================================================
# External Services Configuration
# =============================================================================
# Medical Terminology Services (use test/dev APIs)
UMLS_API_KEY=CHANGE_ME_UMLS_STAGING_KEY
ICD_API_KEY=CHANGE_ME_ICD_STAGING_KEY
SNOMED_API_KEY=CHANGE_ME_SNOMED_STAGING_KEY

# Speech Services
AZURE_SPEECH_KEY=CHANGE_ME_AZURE_STAGING_KEY
AZURE_SPEECH_REGION=eastus

# Translation Services
DEEPL_API_KEY=CHANGE_ME_DEEPL_STAGING_KEY
AZURE_TRANSLATOR_KEY=CHANGE_ME_AZURE_TRANSLATOR_STAGING_KEY

# =============================================================================
# Notification Configuration
# =============================================================================
SLACK_WEBHOOK_URL=CHANGE_ME_SLACK_STAGING_WEBHOOK
WEBHOOK_SECRET=CHANGE_ME_WEBHOOK_STAGING_SECRET
EMAIL_NOTIFICATIONS=staging-alerts@medessence-ai.com

# Monitoring Notifications
ALERT_EMAIL=staging-alerts@medessence-ai.com
ONCALL_EMAIL=dev-team@medessence-ai.com

# =============================================================================
# Feature Flags (More experimental features enabled)
# =============================================================================
FEATURE_ADVANCED_REPORTS=true
FEATURE_MULTI_LANGUAGE=true
FEATURE_AI_SUGGESTIONS=true
FEATURE_EXPORT_PDF=true
FEATURE_REAL_TIME_COLLABORATION=true
FEATURE_MOBILE_APP=true

# =============================================================================
# Performance Configuration
# =============================================================================
CACHE_TTL_SECONDS=1800
CONNECTION_POOL_SIZE=10
QUERY_TIMEOUT=20000
API_TIMEOUT=45000

# =============================================================================
# Compliance and Audit
# =============================================================================
COMPLIANCE_MODE=hipaa
AUDIT_EVENTS=user_login,user_logout,data_access,data_modification,data_export,configuration_change,security_event
SECURITY_SCAN_ENABLED=true
VULNERABILITY_SCAN_SCHEDULE=0 4 * * *

# =============================================================================
# TLS/SSL Configuration
# =============================================================================
TLS_ENABLED=true
TLS_MIN_VERSION=1.2
SSL_CERT_PATH=/etc/ssl/certs/staging.medessence.crt
SSL_KEY_PATH=/etc/ssl/private/staging.medessence.key

# =============================================================================
# Container Registry Configuration
# =============================================================================
REGISTRY=ghcr.io
IMAGE_NAME=medessence-ai
DOCKER_CONFIG_JSON_BASE64=CHANGE_ME_DOCKER_CONFIG

# =============================================================================
# Development and Testing Features (More enabled for staging)
# =============================================================================
DEBUG_MODE=true
TEST_MODE=false
MOCK_SERVICES=false
ENABLE_SWAGGER=true
ENABLE_GRAPHQL_PLAYGROUND=true

# Basic Auth for Staging Access
BASIC_AUTH_USERNAME=medessence
BASIC_AUTH_PASSWORD=CHANGE_ME_STAGING_BASIC_AUTH

# =============================================================================
# Testing and Development Overrides
# =============================================================================
# Mock/Stub Configuration
MOCK_AI_RESPONSES=false
MOCK_TRANSCRIPTION=false
MOCK_EMAIL_SENDING=true
MOCK_SMS_SENDING=true

# Development Tools
ENABLE_DEBUG_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_REQUEST_LOGGING=true

# Testing Configuration
ALLOW_TEST_ENDPOINTS=true
TEST_DATA_SEEDING=true
INTEGRATION_TEST_MODE=false